<!DOCTYPE HTML>
<html>

<head>
    <title>
        Task Solution for Javascript Developer in Inkoop
    </title>
</head>

<body style="text-align:center;">
    <h1 style="color: green">
        Task Solution for Javascript Developer in Inkoop
    </h1>
    <p id="INP_UP"></p>
    <button id="startButton" onclick="start()">
		Start Game
	</button>
    <p id="player1">Player 1 - Won : 0</p>
    <p id="player2">Player 2 - Won : 0</p>
    <p id="result"></p>


    <script>
        var player1 = document.getElementById("player1");
        var player2 = document.getElementById("player2");
        var result = document.getElementById("result");
        var startButton = document.getElementById("startButton");

        var reset = false;

        localStorage.setItem("player1", ((localStorage.getItem("player1") == null) ? 0 : localStorage.getItem("player1")));
        localStorage.setItem("player2", ((localStorage.getItem("player2") == null) ? 0 : localStorage.getItem("player2")));

        var player1Score = parseInt(localStorage.getItem("player1"));
        var player2Score = parseInt(localStorage.getItem("player2"));

        player1.innerHTML = "Player 1 - Won : " + (isNaN(player1Score) ? 0 : player1Score);
        player2.innerHTML = "Player 2 - Won : " + (isNaN(player2Score) ? 0 : player2Score);

        if (player1Score >= 3) {
            result.innerHTML = "Player1 won the match !";
            reset = true;
            startButton.innerHTML = "Reset";
        } else if (player2Score >= 3) {
            result.innerHTML = "Player2 won the match !";
            reset = true;
            startButton.innerHTML = "Reset";

        }

//         alert(isNaN(parseInt(localStorage.getItem("player1"))));
//         alert(localStorage.getItem("player1"));

        // el_down.innerHTML = "Player 1 - Won : " + el_down12;

        function start() {
            if (reset === false) {
                var player1Round = 0;
                var player2Round = 0;

                while (player1Round <= 100 && player2Round <= 100) {
                    player1Round = player1Round + Math.floor(Math.random() * 5);
                    player2Round = player2Round + Math.floor(Math.random() * 5);
                }

                if (player1Round >= 100 && player2Score < 3) {
                    player1Score += 1;
                    localStorage.setItem("player1", player1Score);
                    // alert(localStorage.getItem("player1"));
                    if (player1Score >= 3) {
                        console.log(player1 + "hello")
                        result.innerHTML = "Player1 won the match !";
                        startButton.innerHTML = "Reset";
                        reset = true;
                    }
                }
                if (player2Round >= 100 && player1Score < 3) {
                    player2Score += 1;
                    localStorage.setItem("player2", player2Score);
                    if (player2Score >= 3) {
                        result.innerHTML = "Player2 won the match !";
                        startButton.innerHTML = "Reset";
                        reset = true;
                    }
                }

                player1.innerHTML = "Player 1 - Won : " + player1Score;
                player2.innerHTML = "Player 2 - Won : " + player2Score;

                console.log(player1Round, player2Round);
            } else {
                player1Score = 0;
                player2Score = 0;
                reset = false;
                player1.innerHTML = "Player 1 - Won : " + player1Score;
                player2.innerHTML = "Player 2 - Won : " + player2Score;
                startButton.innerHTML = "Start Game";
                result.innerHTML = "";
                localStorage.setItem("player1", 0);
                localStorage.setItem("player2", 0);

            }
        }
    </script>
</body>

</html>
